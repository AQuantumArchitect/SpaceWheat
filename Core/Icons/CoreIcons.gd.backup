class_name CoreIcons
extends RefCounted

## CoreIcons: Built-in Icon definitions for SpaceWheat
## Defines the fundamental emoji interactions in the quantum bath

## Register all core Icons with the IconRegistry
static func register_all() -> void:
	_register_celestial()
	_register_flora()
	_register_fauna()
	_register_elements()
	_register_abstract()
	_register_reserved()

## ========================================
## Celestial Icons (Drivers)
## ========================================

static func _register_celestial() -> void:
	# â˜€ Sun - Primary driver, day/night cycle
	var sun = Icon.new()
	sun.emoji = "â˜€"
	sun.display_name = "Sol"
	sun.description = "The eternal light that drives all life"
	sun.self_energy = 1.0
	sun.self_energy_driver = "cosine"
	sun.driver_frequency = 0.05  # Cycles per second
	sun.driver_phase = 0.0
	sun.driver_amplitude = 1.0
	sun.hamiltonian_couplings = {
		"ğŸŒ™": 0.8,  # Coupled to moon (day/night opposition)
		"ğŸŒ¿": 0.3,  # Couples to vegetation
		"ğŸŒ¾": 0.4,  # Couples to wheat
		"ğŸŒ±": 0.3   # Couples to seedlings
	}
	sun.tags = ["celestial", "driver", "light", "eternal"]
	sun.is_driver = true
	sun.is_eternal = true
	IconRegistry.register_icon(sun)

	# ğŸŒ™ Moon - Secondary driver, lunar cycle
	var moon = Icon.new()
	moon.emoji = "ğŸŒ™"
	moon.display_name = "Luna"
	moon.description = "The pale companion, ruler of night and tides"
	moon.self_energy = 0.8
	moon.self_energy_driver = "sine"  # 90Â° phase shift from sun
	moon.driver_frequency = 0.05
	moon.driver_phase = PI / 2.0
	moon.driver_amplitude = 1.0
	moon.hamiltonian_couplings = {
		"â˜€": 0.8,   # Coupled to sun
		"ğŸ„": 0.6,  # Strong coupling to mushrooms
		"ğŸ’§": 0.4   # Coupling to water (tides)
	}
	moon.tags = ["celestial", "driver", "lunar", "eternal"]
	moon.is_driver = true
	moon.is_eternal = true
	IconRegistry.register_icon(moon)

## ========================================
## Flora Icons (Producers)
## ========================================

static func _register_flora() -> void:
	# ğŸŒ¾ Wheat - Cultivated crop
	var wheat = Icon.new()
	wheat.emoji = "ğŸŒ¾"
	wheat.display_name = "Wheat"
	wheat.description = "The golden grain, sustainer of civilizations"
	wheat.self_energy = 0.1
	wheat.hamiltonian_couplings = {
		"â˜€": 0.5,   # Couples to sun
		"ğŸ’§": 0.4,  # Couples to water
		"â›°": 0.3   # Couples to soil
	}
	wheat.lindblad_incoming = {
		"â˜€": 0.08,  # Grows from sunlight
		"ğŸ’§": 0.05, # Grows from water
		"â›°": 0.02  # Draws from soil
	}
	wheat.decay_rate = 0.02
	wheat.decay_target = "ğŸ‚"
	wheat.trophic_level = 1  # Producer
	wheat.tags = ["flora", "cultivated", "producer"]
	IconRegistry.register_icon(wheat)

	# ğŸ„ Mushroom - Decomposer, moon-linked
	var mushroom = Icon.new()
	mushroom.emoji = "ğŸ„"
	mushroom.display_name = "Mushroom"
	mushroom.description = "The moon-child, decomposer of dead things"
	mushroom.self_energy = 0.05
	mushroom.hamiltonian_couplings = {
		"ğŸŒ™": 0.6,  # Strong coupling to moon
		"ğŸ‚": 0.5   # Coupling to organic matter
	}
	mushroom.lindblad_incoming = {
		"ğŸŒ™": 0.06,  # Grows from moon influence
		"ğŸ‚": 0.12   # Grows from organic matter
	}
	mushroom.decay_rate = 0.03
	mushroom.decay_target = "ğŸ‚"
	mushroom.trophic_level = 1  # Producer/Decomposer
	mushroom.tags = ["flora", "decomposer", "lunar"]
	IconRegistry.register_icon(mushroom)

	# ğŸŒ¿ Vegetation - Base producer
	var vegetation = Icon.new()
	vegetation.emoji = "ğŸŒ¿"
	vegetation.display_name = "Vegetation"
	vegetation.description = "The green foundation of all ecosystems"
	vegetation.self_energy = 0.1
	vegetation.hamiltonian_couplings = {
		"â˜€": 0.6,   # Strong coupling to sun
		"ğŸ’§": 0.5,  # Coupling to water
		"ğŸ‚": 0.3   # Coupling to organic matter (nutrient cycling)
	}
	vegetation.lindblad_incoming = {
		"â˜€": 0.10,  # Grows from sunlight
		"ğŸ’§": 0.06, # Grows from water
		"ğŸ‚": 0.04  # Grows from decomposed matter
	}
	vegetation.decay_rate = 0.025
	vegetation.decay_target = "ğŸ‚"
	vegetation.trophic_level = 1  # Producer
	vegetation.tags = ["flora", "producer", "foundation"]
	IconRegistry.register_icon(vegetation)

	# ğŸŒ± Seedling - Potential, growth
	var seedling = Icon.new()
	seedling.emoji = "ğŸŒ±"
	seedling.display_name = "Seedling"
	seedling.description = "The promise of life, pure potential"
	seedling.self_energy = 0.05
	seedling.hamiltonian_couplings = {
		"â˜€": 0.4,   # Coupling to sun
		"ğŸ’§": 0.6,  # Strong coupling to water (needs it to germinate)
		"â›°": 0.4   # Coupling to soil
	}
	seedling.lindblad_outgoing = {
		"ğŸŒ¿": 0.08   # Grows into vegetation
	}
	seedling.decay_rate = 0.04  # Higher decay (many seeds fail)
	seedling.decay_target = "ğŸ‚"
	seedling.trophic_level = 1  # Producer
	seedling.tags = ["flora", "potential", "fragile"]
	IconRegistry.register_icon(seedling)

## ========================================
## Fauna Icons (Consumers)
## ========================================

static func _register_fauna() -> void:
	# ğŸº Wolf - Apex predator
	var wolf = Icon.new()
	wolf.emoji = "ğŸº"
	wolf.display_name = "Wolf"
	wolf.description = "The apex hunter, keeper of balance"
	wolf.self_energy = -0.05  # Slight negative (needs food to survive)
	wolf.hamiltonian_couplings = {
		"ğŸ‡": 0.6,  # Strong coupling to rabbits (hunting awareness)
		"ğŸ¦Œ": 0.5,  # Coupling to deer
		"ğŸŒ³": 0.2   # Weak coupling to forest (shelter)
	}
	wolf.lindblad_incoming = {
		"ğŸ‡": 0.15,  # Gains from eating rabbits
		"ğŸ¦Œ": 0.12   # Gains from eating deer
	}
	wolf.decay_rate = 0.03
	wolf.decay_target = "ğŸ’€"
	wolf.trophic_level = 3  # Carnivore
	wolf.tags = ["fauna", "predator", "apex"]
	IconRegistry.register_icon(wolf)

	# ğŸ‡ Rabbit - Primary prey, reproducer
	var rabbit = Icon.new()
	rabbit.emoji = "ğŸ‡"
	rabbit.display_name = "Rabbit"
	rabbit.description = "The swift reproducer, food for many"
	rabbit.self_energy = 0.02  # Slight positive (reproductive)
	rabbit.hamiltonian_couplings = {
		"ğŸŒ¿": 0.5,  # Coupling to vegetation (food)
		"ğŸº": 0.6,  # Strong coupling to wolf (danger awareness)
		"ğŸ¦…": 0.4   # Coupling to eagle (danger)
	}
	rabbit.lindblad_incoming = {
		"ğŸŒ¿": 0.10   # Gains from eating vegetation
	}
	rabbit.decay_rate = 0.05
	rabbit.decay_target = "ğŸ’€"
	rabbit.trophic_level = 2  # Herbivore
	rabbit.tags = ["fauna", "herbivore", "prey"]
	IconRegistry.register_icon(rabbit)

	# ğŸ¦Œ Deer - Large herbivore
	var deer = Icon.new()
	deer.emoji = "ğŸ¦Œ"
	deer.display_name = "Deer"
	deer.description = "The graceful grazer of the forest"
	deer.self_energy = 0.01
	deer.hamiltonian_couplings = {
		"ğŸŒ¿": 0.6,  # Strong coupling to vegetation
		"ğŸŒ³": 0.4,  # Coupling to forest
		"ğŸº": 0.5   # Coupling to wolf (danger)
	}
	deer.lindblad_incoming = {
		"ğŸŒ¿": 0.08   # Gains from vegetation
	}
	deer.decay_rate = 0.04
	deer.decay_target = "ğŸ’€"
	deer.trophic_level = 2  # Herbivore
	deer.tags = ["fauna", "herbivore", "large"]
	IconRegistry.register_icon(deer)

	# ğŸ¦… Eagle - Apex aerial predator
	var eagle = Icon.new()
	eagle.emoji = "ğŸ¦…"
	eagle.display_name = "Eagle"
	eagle.description = "The sky-lord, swift death from above"
	eagle.self_energy = -0.03
	eagle.hamiltonian_couplings = {
		"ğŸ‡": 0.5,  # Coupling to rabbits
		"ğŸ­": 0.4   # Coupling to mice
	}
	eagle.lindblad_incoming = {
		"ğŸ‡": 0.10,  # Gains from rabbits
		"ğŸ­": 0.08   # Gains from mice
	}
	eagle.decay_rate = 0.025
	eagle.decay_target = "ğŸ’€"
	eagle.trophic_level = 3  # Carnivore
	eagle.tags = ["fauna", "predator", "aerial"]
	IconRegistry.register_icon(eagle)

## ========================================
## Elemental Icons (Abiotic)
## ========================================

static func _register_elements() -> void:
	# ğŸ’§ Water - Flow, life sustainer
	var water = Icon.new()
	water.emoji = "ğŸ’§"
	water.display_name = "Water"
	water.description = "The flow of life, essence of all things"
	water.self_energy = 0.0  # Neutral
	water.hamiltonian_couplings = {
		"ğŸŒ™": 0.4,  # Coupling to moon (tides)
		"ğŸŒ¿": 0.3,  # Coupling to vegetation
		"ğŸŒ¾": 0.3   # Coupling to wheat
	}
	water.trophic_level = 0  # Abiotic
	water.tags = ["element", "water", "abiotic", "essential"]
	water.is_eternal = true
	IconRegistry.register_icon(water)

	# â›° Soil - Foundation, nutrients
	var soil = Icon.new()
	soil.emoji = "â›°"
	soil.display_name = "Soil"
	soil.description = "The foundation, holder of minerals and memory"
	soil.self_energy = 0.0
	soil.hamiltonian_couplings = {
		"ğŸŒ¿": 0.3,  # Coupling to vegetation
		"ğŸŒ¾": 0.3,  # Coupling to wheat
		"ğŸ‚": 0.4   # Coupling to organic matter
	}
	soil.lindblad_incoming = {
		"ğŸ‚": 0.02   # Slowly accumulates from decay
	}
	soil.trophic_level = 0  # Abiotic
	soil.tags = ["element", "soil", "abiotic", "foundation"]
	water.is_eternal = true
	IconRegistry.register_icon(soil)

	# ğŸ‚ Organic Matter - Recycling node
	var organic_matter = Icon.new()
	organic_matter.emoji = "ğŸ‚"
	organic_matter.display_name = "Organic Matter"
	organic_matter.description = "The cycle's currency, death's gift to life"
	organic_matter.self_energy = 0.0
	organic_matter.hamiltonian_couplings = {
		"ğŸŒ¿": 0.3,  # Couples to vegetation (nutrient cycling)
		"ğŸ„": 0.5,  # Strong coupling to mushrooms
		"â›°": 0.3   # Coupling to soil
	}
	# Note: Receives from many decay_rate terms, no need to specify lindblad_incoming here
	organic_matter.trophic_level = 0  # Abiotic/decomposed
	organic_matter.tags = ["element", "decay", "recycling", "foundation"]
	IconRegistry.register_icon(organic_matter)

## ========================================
## Abstract Icons (Conceptual)
## ========================================

static func _register_abstract() -> void:
	# ğŸ’€ Death/Labor - Terminus/Human input
	var death = Icon.new()
	death.emoji = "ğŸ’€"
	death.display_name = "Death/Labor"
	death.description = "The end and the beginning, the price of life"
	death.self_energy = 0.0
	death.hamiltonian_couplings = {
		"ğŸ‚": 0.4,  # Coupling to organic matter
		"ğŸ‘¥": 0.3   # Coupling to human effort
	}
	death.lindblad_outgoing = {
		"ğŸ‚": 0.05   # Decay to organic matter
	}
	# Note: Receives from many decay_target terms
	death.trophic_level = 0  # Abstract
	death.tags = ["abstract", "death", "transformation"]
	IconRegistry.register_icon(death)

	# ğŸ‘¥ Human Effort - Labor input
	var labor = Icon.new()
	labor.emoji = "ğŸ‘¥"
	labor.display_name = "Human Effort"
	labor.description = "The will applied, civilization's engine"
	labor.self_energy = 0.05
	labor.hamiltonian_couplings = {
		"ğŸŒ¾": 0.5,  # Strong coupling to wheat (cultivation)
		"ğŸ’€": 0.3,  # Coupling to death/labor
		"â›°": 0.3   # Coupling to soil (working the land)
	}
	labor.trophic_level = 0  # Abstract
	labor.tags = ["abstract", "labor", "human", "cultivation"]
	IconRegistry.register_icon(labor)

## ========================================
## Reserved Icons (Future expansion)
## ========================================

static func _register_reserved() -> void:
	# ğŸŒ³ Forest - Ecosystem anchor
	var forest = Icon.new()
	forest.emoji = "ğŸŒ³"
	forest.display_name = "Forest"
	forest.description = "The living cathedral, home to multitudes"
	forest.self_energy = 0.0
	forest.hamiltonian_couplings = {
		"ğŸŒ¿": 0.4,  # Coupling to vegetation
		"ğŸº": 0.2,  # Weak coupling to wolf (shelter)
		"ğŸ¦Œ": 0.3   # Coupling to deer
	}
	forest.trophic_level = 0  # Ecosystem
	forest.tags = ["ecosystem", "forest", "structure"]
	IconRegistry.register_icon(forest)

	# ğŸ­ Mouse - Small prey
	var mouse = Icon.new()
	mouse.emoji = "ğŸ­"
	mouse.display_name = "Mouse"
	mouse.description = "The tiny survivor, food for many"
	mouse.self_energy = 0.01
	mouse.hamiltonian_couplings = {
		"ğŸŒ¿": 0.4,  # Coupling to vegetation
		"ğŸ¦…": 0.5,  # Coupling to eagle (danger)
		"ğŸœ": 0.2   # Weak coupling to bugs
	}
	mouse.lindblad_incoming = {"ğŸŒ¿": 0.06}
	mouse.decay_rate = 0.06
	mouse.decay_target = "ğŸ’€"
	mouse.trophic_level = 2  # Herbivore
	mouse.tags = ["fauna", "herbivore", "small", "prey"]
	IconRegistry.register_icon(mouse)

	# ğŸ¦ Bird - Disperser, small predator
	var bird = Icon.new()
	bird.emoji = "ğŸ¦"
	bird.display_name = "Bird"
	bird.description = "The wanderer, seed-carrier and singer"
	bird.self_energy = 0.0
	bird.hamiltonian_couplings = {
		"ğŸŒ¿": 0.3,  # Coupling to vegetation
		"ğŸœ": 0.4,  # Coupling to bugs
		"ğŸŒ±": 0.3   # Coupling to seedlings (dispersal)
	}
	bird.lindblad_incoming = {"ğŸœ": 0.07}
	bird.decay_rate = 0.04
	bird.decay_target = "ğŸ’€"
	bird.trophic_level = 2  # Omnivore
	bird.tags = ["fauna", "omnivore", "disperser"]
	IconRegistry.register_icon(bird)

	# ğŸœ Bug - Decomposer, base prey
	var bug = Icon.new()
	bug.emoji = "ğŸœ"
	bug.display_name = "Bug"
	bug.description = "The tireless recycler, foundation of the food web"
	bug.self_energy = 0.02
	bug.hamiltonian_couplings = {
		"ğŸ‚": 0.5,  # Strong coupling to organic matter
		"ğŸŒ¿": 0.3,  # Coupling to vegetation
		"ğŸ¦": 0.4   # Coupling to birds (danger)
	}
	bug.lindblad_incoming = {"ğŸ‚": 0.08}
	bug.decay_rate = 0.05
	bug.decay_target = "ğŸ‚"
	bug.trophic_level = 1  # Decomposer/Detritivore
	bug.tags = ["fauna", "decomposer", "small"]
	IconRegistry.register_icon(bug)

	# ğŸª Market - Exchange node (placeholder for future)
	var market = Icon.new()
	market.emoji = "ğŸª"
	market.display_name = "Market"
	market.description = "The meeting place, where value flows"
	market.self_energy = 0.0
	market.hamiltonian_couplings = {
		"ğŸŒ¾": 0.4,  # Coupling to wheat
		"ğŸ‘¥": 0.5   # Coupling to labor
	}
	market.trophic_level = 0  # Abstract/Economic
	market.tags = ["abstract", "economy", "exchange"]
	IconRegistry.register_icon(market)
