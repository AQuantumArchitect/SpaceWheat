# ğŸ§ ğŸ—ºï¸ Codexâ€‘Mini Rig Plan (QA Focus)

This plan exists to **help QA playtesters complete the game loop** and surface bugs/perf issues. It is not just a descriptionâ€”use it to **decide new turns** and **evaluate results**.

Goal: Provide a turn-by-turn rig that lets lightweight Codex-mini instances interact with the live Farm/QuantumInstrument simulation, cycle through quests/vocab, and log each "turn" for inspection.

## Core pieces (all in ğŸ„/ğŸ›ï¸)
1. **Live rig listener** - `Tests/rig_listener.gd` keeps a single game session alive and executes JSON turns from `user://rig/queue.jsonl`, writing JSON results to `user://rig/results.jsonl`.
2. **Rig scripts** - `ğŸ„/ğŸ›ï¸/ğŸŸ¢.sh` starts the listener; `ğŸ„/ğŸ›ï¸/âœï¸.sh` appends one JSON turn.
3. **FarmInstrument helper** - already created, exposes overlay toggles, resource queries, quest info. This becomes the back-end control surface for the rig (accept quests, open quest board, read resources, trigger overlays, etc.).
4. **Tokenized script tooling** - `lib_qii.sh` and token logs can serve as the rig's turn history; extend them to record outcomes (success/failure) and turn IDs.
5. **Documentation/README** - explain how to spin up the rig, what scripts exist, how to interpret token/result logs, and how to add new turns.

## Phases (what to build next)
- **Phase 1 (Live rig actions).** Extend `Tests/rig_listener.gd` with more actions (quest accept/turnâ€‘in, vocab placement, build/harvest).
- **Phase 2 (Feedback instrumentation).** Expand FarmInstrument to emit perâ€‘action outcomes (resource deltas, quest acceptance status) so the rig can close the loop.
- **Phase 3 (Docs & usage).** Keep the README focused on liveâ€‘rig usage and how Codexâ€‘mini should actually play.

## Risks/gaps (QAâ€‘relevant)
- Need to decide how Codex-minis specify actions: via text file, token log, or RPC? The rig should standardize a compact command set (e.g., `QII +vocab â†’ Village`), ideally reusing the `VOCAB_QII.tsv` vocabulary.
- Some actions currently fail (missing resources, terminals). The rig should include setup turns (seed resources, bind terminals) before measurement actions.
