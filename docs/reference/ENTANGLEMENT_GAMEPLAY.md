# Entanglement Gameplay Mechanics

## Overview
When two plots are entangled, their harvest outcomes become **correlated**. This transforms farming from independent choices into a strategic resource management puzzle.

## Bell States as Gameplay Modes

### |Î¦+âŸ© - "Same" Correlation (Synchronized Harvest)
**Physics**: `(|00âŸ© + |11âŸ©)/âˆš2` - Perfectly correlated outcomes
**Gameplay**: Both plots collapse to the **same emoji**
- Both get ğŸŒ¾ (wheat) **OR** both get ğŸ‘¥ (labor)
- Probability of same: ~100%
- **Strategic Use**: Synchronized resource production
  - Two wheat plots â†’ guaranteed both ğŸŒ¾ or both ğŸ‘¥
  - Useful for: Coordinating harvests, predictable yields
- **Risk**: If you need one resource, you might get the other instead!

### |Î¨+âŸ© - "Opposite" Correlation (Complementary Harvest)
**Physics**: `(|01âŸ© + |10âŸ©)/âˆš2` - Anti-correlated outcomes
**Gameplay**: Plots collapse to **opposite emojis**
- One gets ğŸŒ¾, the other gets ğŸ‘¥
- Probability of opposite: ~100%
- **Strategic Use**: Diversified resource production
  - One plot guaranteed ğŸŒ¾, one guaranteed ğŸ‘¥
  - Useful for: Balanced resource economy, reducing risk
- **Benefit**: Hedging - you always get both resource types
- **Trade-off**: Can't get lucky with both yields from same plot type

## Gameplay Loop: Entangled Farming

### 1. Establish Entanglement
```
Player clicks "Entangle" on two adjacent plots
â†’ Choose Bell state: Same (Î¦+) or Opposite (Î¨+)?
â†’ Cost: 1 Conspiracy Node energy (or other quantum resource)
â†’ Plots are now quantum-linked
â†’ Visual indicator: Glowing line between plots
```

### 2. Growth Phase (Synchronized)
```
Both plots grow together:
â”œâ”€ Energy growth: Sun â†’ both grow exponentially together
â”œâ”€ Theta evolution: Both affected by sun/moon Hamiltonian
â”œâ”€ Decoherence: Both decay in tandem
â””â”€ Measurement still forbidden (alive superposition)
```

### 3. Strategic Decision: Harvest Timing
```
Player must choose WHEN to measure both plots together
(Measuring one collapses both instantly!)

Optimal timing depends on:
â”œâ”€ Current energy level (radius)
â”œâ”€ Theta position (which emoji is most likely)
â”œâ”€ Bell state type (what do you WANT to harvest?)
â””â”€ Resource needs (what's more valuable right now?)
```

### 4. Entangled Measurement & Harvest
```
Click harvest on plot A (which is entangled with B)
â†’ BOTH plots measured simultaneously
â†’ Outcomes correlated according to Bell state:
   â”œâ”€ Î¦+ (Same): A=ğŸŒ¾ â†’ B=ğŸŒ¾ (auto-sync)
   â””â”€ Î¨+ (Opposite): A=ğŸŒ¾ â†’ B=ğŸ‘¥ (complementary)

Result:
â”œâ”€ Plot A yields: frozen_energy Ã— collapsed_emoji_a
â”œâ”€ Plot B yields: frozen_energy Ã— collapsed_emoji_b
â””â”€ Both plots reset (ready for next cycle)
```

## Entanglement Payoffs

### Pure Same-Correlation (Î¦+) Farm
```
Scenario: Wheat field â†” Wheat field
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Entanglement    â”‚ Outcomes         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Both at 0.5     â”‚ Both ğŸŒ¾ (5 wheat)â”‚
â”‚ energy, 60% ğŸŒ¾  â”‚ OR both ğŸ‘¥ (5    â”‚
â”‚                 â”‚ labor)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Advantage: Predictable! Energy 0.5 + good theta = reliable harvest
Disadvantage: 40% chance both collapse to labor (loss!)
```

### Pure Opposite-Correlation (Î¨+) Farm
```
Scenario: Wheat â†” Tomato field
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Entanglement     â”‚ Outcomes          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Energy 0.5       â”‚ Wheat: 5 units    â”‚
â”‚ Wheat 60% north  â”‚ Tomato: 5 units   â”‚
â”‚ (ğŸŒ¾), Tomato 60% â”‚ (complementary)   â”‚
â”‚ north (ğŸ…)       â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Advantage: Always get both resources! Hedging strategy
Disadvantage: Can't maximize one resource type
```

## Entanglement Mechanics in Code

### Creating Entanglement
```gdscript
# In FarmGrid or GameController
func create_entanglement(plot_a_pos: Vector2i, plot_b_pos: Vector2i, bell_state: String):
    var plot_a = get_plot(plot_a_pos)
    var plot_b = get_plot(plot_b_pos)

    if not plot_a.quantum_state or not plot_b.quantum_state:
        return false

    # Create EntangledPair
    var pair = EntangledPair.new()
    pair.qubit_a_id = plot_a.plot_id
    pair.qubit_b_id = plot_b.plot_id
    pair.north_emoji_a = plot_a.get_plot_emojis()["north"]
    pair.south_emoji_a = plot_a.get_plot_emojis()["south"]
    pair.north_emoji_b = plot_b.get_plot_emojis()["north"]
    pair.south_emoji_b = plot_b.get_plot_emojis()["south"]

    # Create specified Bell state
    match bell_state:
        "same":
            pair.create_bell_phi_plus()
        "opposite":
            pair.create_bell_psi_plus()

    # Link qubits to pair
    plot_a.quantum_state.entangled_pair = pair
    plot_a.quantum_state.is_qubit_a = true
    plot_b.quantum_state.entangled_pair = pair
    plot_b.quantum_state.is_qubit_a = false

    # Store in grid
    entangled_pairs.append(pair)
    return true
```

### Measurement (Both Plots)
```gdscript
# In WheatPlot.measure()
func measure(icon_network = null, paired_plot = null) -> String:
    if quantum_state.entangled_pair:
        # ENTANGLED: Measure BOTH simultaneously
        var pair = quantum_state.entangled_pair
        var result = pair.measure_both()

        var my_result = result["a"] if quantum_state.is_qubit_a else result["b"]
        var other_result = result["b"] if quantum_state.is_qubit_a else result["a"]

        # Both freeze their energy
        quantum_state.freeze_energy_on_measurement()
        paired_plot.quantum_state.freeze_energy_on_measurement()

        return my_result
    else:
        # UNENTANGLED: Measure normally
        quantum_state.freeze_energy_on_measurement()
        return quantum_state.measure()
```

### Harvest (Both Plots)
```gdscript
# When player harvests entangled plot A
# â†’ Both plots A and B harvest together

func harvest_entangled_pair(plot_a: WheatPlot, plot_b: WheatPlot) -> Dictionary:
    var result_a = plot_a.harvest()  # Uses measured_energy from pair measurement
    var result_b = plot_b.harvest()

    return {
        "plot_a": result_a,
        "plot_b": result_b,
        "correlation_type": plot_a.quantum_state.entangled_pair.get_measurement_correlation()["type"],
        "total_yield_a": result_a["yield"],
        "total_yield_b": result_b["yield"]
    }
```

## Gameplay Strategies

### Strategy 1: Synchronize High-Yield Crops
Create |Î¦+âŸ© entanglement between two wheat plots when both have high energy and favorable theta.
- **Upside**: If theta good, both harvest well
- **Downside**: If theta bad, both fail together
- **Use**: When confident in quantum state

### Strategy 2: Risk Hedging
Create |Î¨+âŸ© between wheat and tomato with opposite emoji preferences.
- **Upside**: Guaranteed to get both ğŸŒ¾ and ğŸ…
- **Use**: When you need balanced resources
- **Plan ahead**: Don't create opposite if one crop is in bad shape

### Strategy 3: Energy Amplification
Entangle two plots with high coherence (both in superposition).
- Both grow exponentially together (energy multiplication)
- More total energy than independent plots
- **Cost**: Must coordinate harvest timing precisely

### Strategy 4: Theta Targeting
Use sun/moon Hamiltonian to push both theta toward desired emoji together.
- Sun phase pushes both toward ğŸŒ¾
- Moon phase lets both drift freely
- **Entanglement amplifies effect**: Two plots drifting = coordinated uncertainty

## Resource Costs & UI

### Entanglement Costs
```
Create |Î¦+âŸ© (Same): 2 Conspiracy Node energy
Create |Î¨+âŸ© (Opposite): 1 Conspiracy Node energy + 1 Labor

Rationale:
- Same correlation is harder to maintain (requires stronger coupling)
- Opposite is cheaper but less predictable
```

### UI Display
```
On entangled plots:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ¾ Plot A       â”‚
â”‚ Î¸: 45Â°, r: 0.6 â”‚
â”‚ â†” ENTANGLED â†”   â”‚  â† Glowing link
â”‚ ğŸ… Plot B       â”‚
â”‚ Î¸: 50Â°, r: 0.55â”‚
â”‚ [Î¦+] Same      â”‚  â† Bell state indicator
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

On hover: Show correlation strength + predicted outcomes
```

## Physics â†” Gameplay Bridge

**Quantum Property** â†’ **Gameplay Mechanic**
- Bell state (|Î¦+âŸ©/|Î¨+âŸ©) â†’ Correlation type (same/opposite)
- Measurement correlation â†’ Harvest outcome linkage
- Entanglement entropy â†’ Uncertainty/risk level
- Concurrence â†’ Strength of coupling (cost inversely)

---

## Example: Full Game Turn with Entanglement

### Turn 1: Plant & Entangle
```
Day 1, Morning:
  Action: Plant wheat at (0,0) and (1,0)
  â†’ Both start radius=0.3, theta=Ï€/2
  â†’ Cost: 0.4 labor (0.2 each)

  Action: Entangle with |Î¦+âŸ© (Same)
  â†’ Cost: 2 node energy
  â†’ Both plots now quantum-linked
```

### Turn 2-5: Growth Under Sun/Moon
```
Days 2-3 (Sun phase):
  - Energy grows: 0.3 â†’ 0.5 â†’ 0.7 (exponential)
  - Theta biased: Ï€/2 â†’ 0.4 rad (toward ğŸŒ¾)
  - Plots grow in sync

Day 4 (Moon phase):
  - Energy stalls: 0.7 (no growth)
  - Theta drifts: back toward Ï€/2
  - Still perfectly entangled
```

### Turn 5: Harvest Entangled Pair
```
Day 5, Evening (Energy: 0.7, Theta: 0.6 rad)
  P(ğŸŒ¾) â‰ˆ 70%, P(ğŸ‘¥) â‰ˆ 30%

  Action: Harvest Plot A (at (0,0))
  â†’ Triggers BOTH plots' measurement:
    â€¢ Both measured simultaneously
    â€¢ |Î¦+âŸ© correlation: outcomes must be same
    â€¢ Outcome: BOTH collapse to ğŸŒ¾ (70% chance)
    â€¢ Result: A gets 7 wheat, B gets 7 wheat âœ“

    OR outcome: BOTH collapse to ğŸ‘¥ (30% chance)
    â€¢ Result: A gets 7 labor, B gets 7 labor âœ— (oops!)
```

## Success Metrics

A good entanglement gameplay system should:
- âœ… **Encourage cooperation**: Players benefit from planning paired harvests
- âœ… **Create meaningful choices**: Same vs Opposite has real trade-offs
- âœ… **Reward strategic thinking**: Timing harvest based on theta + energy
- âœ… **Show quantum properties intuitively**: Correlation â†” outcome linkage is obvious
- âœ… **Enable advanced strategies**: Energy pooling, theta manipulation, risk hedging
